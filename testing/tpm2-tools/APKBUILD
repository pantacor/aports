# Contributor: Alexander Sack <asac@pantacor.com>
# Maintainer: Alexander Sack <asac@pantacor.com>
pkgname="tpm2-tools"
pkgver="4.0_rc2"
pkgrel=1
pkgdesc="TPM2 Tools"
url="https://github.com/tpm2-software/tpm2-tools/"
arch="all"
license="BSD-2-Clause"
makedepends="tpm2-tss-dev automake autoconf autoconf-archive libtool openssl-dev doxygen linux-headers curl-dev"
subpackages="tpm2-tools-doc"
sourcever="${pkgver/_/-}"
source="https://github.com/tpm2-software/${pkgname}/releases/download/${sourcever}/${pkgname}-${sourcever}.tar.gz 
		01-public-public.patch
		02-public-area.patch"
builddir="$srcdir/$pkgname-$sourcever"

build() {
	cd $builddir
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr
	make	
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="dfdf38f488238f06315493c0a708a9efb104e92e0b149180b13a542fb9fa4ff79199121876a7c0ad64b58f0738d3f11206431fffd1b259a1a50a34f6f34a8250  tpm2-tools-4.0-rc2.tar.gz
4dd009de90fe778c6819c7b113674ef85ea937611284b101b82e7a4ba625cdad1e3650c71a3634b6e3b7b3845550beb32baa2db1a24e30bc18b15b0e24186730  01-public-public.patch
f13c4cd79aab0f3c54d4369666bccf7df8093c7d0abb0bc82eb5d3e4e219988b236fe79d7af1d03cd8762e94db91a3d99d928a73f1210b37f0cc9f4e4215eb5e  02-public-area.patch"
